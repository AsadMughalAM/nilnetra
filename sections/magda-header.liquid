{%- style -%}
  /* Sticky behavior targeting the section container */
  .magda-header-sticky-host {
    position: sticky;
    top: 0;
    z-index: 1000;
    background: #ffffff;
    /* Ensure background is opaque */
  }

  /* Base Layout (Desktop) */
  .magda-header {
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    align-items: center;
    padding: 2.5rem 4rem;
    background: #ffffff;
    color: #000000;
    width: 100%;
    box-sizing: border-box;
    margin-bottom: 2rem;
    transition: transform 0.3s ease;
  }

  /* Left Section */
  .magda-header__left {
    display: flex;
    align-items: center;
    gap: 3rem;
  }

  /* Center Section (Logo) */
  .magda-header__center {
    display: flex;
    justify-content: center;
    white-space: nowrap;
    /* CRITICAL: Prevent logo from breaking lines */
  }

  .magda-header__logo-link {
    text-decoration: none;
    color: #000;
    display: block;
    /* Ensure it behaves correctly */
  }

  .magda-header__logo-text {
    font-family: "Big Caslon"
    , "Book Antiqua"
    , "Palatino Linotype"
    , Georgia
    , serif;
    font-size: 2.8rem;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    font-weight: 400;
    margin: 0;
    line-height: 1;
  }

  /* Right Section */
  .magda-header__right {
    display: flex;
    align-items: center;
    justify-content: flex-end;
    gap: 2.5rem;
    font-size: 1.3rem;
    font-family: var(--font-body-family);
  }

  /* Desktop Elements Styles */
  .magda-nav-link {
    text-decoration: none;
    color: #1a1a1a;
    font-size: 1.3rem;
    font-family: var(--font-body-family);
    letter-spacing: 0.02em;
    transition: color 0.2s ease;
  }

  .magda-nav-link:hover {
    color: #555;
  }

  .magda-search-icon {
    display: flex;
    align-items: center;
    cursor: pointer;
    background: none;
    border: none;
    padding: 0;
  }

  .magda-search-icon svg {
    width: 16px;
    height: 16px;
    fill: none;
    stroke: currentColor;
    stroke-width: 1.5;
  }

  .magda-currency {
    color: #1a1a1a;
    cursor: pointer;
  }

  .magda-cart-link {
    display: flex;
    align-items: center;
    text-decoration: none;
    color: #1a1a1a;
    gap: 0.8rem;
  }

  .magda-cart-count {
    background: #000;
    color: #fff;
    font-size: 1rem;
    font-weight: 600;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    line-height: 1;
  }

  /* Ensure drawer styles are loaded */
  header-drawer {
    display: flex;
    margin-right: 0;
    /* Align perfectly */
  }

  /* Reset button styles for drawer trigger if needed */
  .header__icon {
    color: currentColor;
    text-decoration: none;
    background: none;
    border: none;
    padding: 0;
    width: 44px;
    height: 44px;
    display: flex;
    align-items: center;
    justify-content: center;
  }


  /*
   --------------------------------------------------------- 
   MOBILE RESPONSIVENESS (Max-Width 990px) 
   ---------------------------------------------------------
*/
  @media screen and (max-width: 990px) {
    .magda-header {
      /* Switch to Flexbox for easier 3-part layout on mobile */
      display: flex;
      justify-content: space-between;
      padding: 1rem 1.5rem !important;
      /* Reduced padding comfortably */
      height: 70px;
      /* Force a reasonable height */
    }

    /* Left: Hamburger */
    .magda-header__left {
      flex: 1;
      gap: 0;
      /* Reset desktop gap */
      justify-content: flex-start;
    }

    /* Hide Desktop Links on Left */
    .magda-header__left .magda-nav-link,
    .magda-header__left .magda-search-icon {
      display: none;
    }

    /* Center: Logo */
    .magda-header__center {
      flex: 0 0 auto;
    }

    .magda-header__logo-text {
      font-size: 2rem;
      /* Smaller font for mobile */
    }
    .magda-logo-img {
      max-width: 120px;
      /* Constrain image logo width */
      height: auto;
    }

    /* Right: Bag Only */
    .magda-header__right {
      flex: 1;
      gap: 0;
      justify-content: flex-end;
    }

    /* Hide Desktop Links on Right */
    .magda-header__right .magda-nav-link,
    .magda-header__right .magda-currency {
      display: none;
      /* Hide 'Boutique', 'Assistance', 'PK/PKR' */
    }

    /* Ensure Drawer Toggle is Visible */
    header-drawer {
      display: block;
    }
  }

  /* DESKTOP (Min-Width 991px) */
  @media screen and (min-width: 991px) {
    header-drawer {
      display: none;
      /* Hide drawer on desktop */
    }
  }
{%- endstyle -%}

<link
  rel="stylesheet"
  href="{{ 'component-menu-drawer.css' | asset_url }}"
  media="print"
  onload="this.media='all'">
<script src="{{ 'details-disclosure.js' | asset_url }}" defer="defer"></script>

<header class="magda-header">
  <div class="magda-header__left">
    {% render 'header-drawer' %}

    {%- if section.settings.menu_left != blank -%}
      {%- for link in section.settings.menu_left.links -%}
        <a href="{{ link.url }}" class="magda-nav-link">{{ link.title }}</a>
      {%- endfor -%}
    {%- else -%}
      <!-- Fallback links if no menu selected -->
      <a href="/collections/all" class="magda-nav-link">Shop</a>
      <a href="/pages/highlights" class="magda-nav-link">Highlights</a>
      <a href="/features" class="magda-nav-link">Explore</a>
    {%- endif -%}

    <button class="magda-search-icon" aria-label="Search">
      <svg
        aria-hidden="true"
        focusable="false"
        role="presentation"
        viewBox="0 0 24 24">
        <path
          d="M11 19C15.4183 19 19 15.4183 19 11C19 6.58172 15.4183 3 11 3C6.58172 3 3 6.58172 3 11C3 15.4183 6.58172 19 11 19Z"
          stroke="currentColor"
          stroke-linecap="round"
          stroke-linejoin="round" />
        <path
          d="M21 21L16.65 16.65"
          stroke="currentColor"
          stroke-linecap="round"
          stroke-linejoin="round" />
      </svg>
    </button>
  </div>

  <div class="magda-header__center">
    <a href="{{ routes.root_url }}" class="magda-header__logo-link">
      {%- if section.settings.logo != blank -%}
        {{ section.settings.logo | image_url: width: 300 | image_tag: class: 'magda-logo-img', alt: shop.name }}
      {%- else -%}
        <h1 class="magda-header__logo-text">{{ shop.name }}</h1>
      {%- endif -%}
    </a>
  </div>

  <div class="magda-header__right">
    <div class="magda-currency">
      {%- if localization.available_countries.size > 1 -%}
        {{ localization.country.iso_code }} / {{ localization.country.currency.iso_code }}
      {%- else -%}
        PK / PKR
      {%- endif -%}
    </div>

    {%- if section.settings.menu_right != blank -%}
      {%- for link in section.settings.menu_right.links -%}
        <a href="{{ link.url }}" class="magda-nav-link">{{ link.title }}</a>
      {%- endfor -%}
    {%- else -%}
      <a href="/pages/boutique" class="magda-nav-link">Boutique</a>
      <a href="/pages/contact" class="magda-nav-link">Assistance</a>
    {%- endif -%}

    <a
      href="{{ routes.cart_url }}"
      class="magda-cart-link"
      id="cart-icon-bubble">
      <span>Bag</span>
      <span class="magda-cart-count">{{ cart.item_count }}</span>
    </a>
  </div>
</header>
<script>
  // Simple search toggle if needed, or link to search page
  document.querySelector('.magda-search-icon').addEventListener('click', function(e) {
     e.preventDefault();
     window.location.href = "{{ routes.search_url }}";
  });
</script>

{% schema %}
  {
    "name": "Magda Header",
    "class": "magda-header-sticky-host",
    "settings": [
      {
        "type": "image_picker",
        "id": "logo",
        "label": "Logo"
      },
      {
        "type": "link_list",
        "id": "menu_left",
        "label": "Left Menu",
        "default": "main-menu"
      },
      {
        "type": "link_list",
        "id": "menu_right",
        "label": "Right Menu"
      },
      {
        "type": "link_list",
        "id": "menu",
        "label": "Mobile Menu (Drawer)",
        "default": "main-menu"
      }, {
        "type": "color_scheme",
        "id": "menu_color_scheme",
        "label": "Mobile Menu Color Scheme",
        "default": "scheme-1"
      }
    ],
    "presets": [
      {
        "name": "Magda Header"
      }
    ]
  }
{% endschema %}